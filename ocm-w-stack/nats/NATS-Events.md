# NATS Events used in OCM W-Stack:

| Service                  | Event Type                                 | Action    | Event Structure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Dependency                                                                                                                                                                         |
| ------------------------ | ------------------------------------------ | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| credential-retrieval     | retrieval.offering.external                | subscribe | type RetrievalOffering struct {<br>    common.Request<br>    Offer credential.CredentialOffer \`json:"offer"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"<br>"gitlab.eclipse.org/eclipse/xfsc/libraries/ssi/oid4vip/model/credential" |
| credential-retrieval     | retrieval.offering.acceptance              | subscribe | type RetrievalAcceptanceNotification struct {<br>    common.Request<br>    OfferingId      string \`json:"offeringId"\`<br>    Message         string \`json:"message"\`<br>    Result          bool   \`json:"result"\`<br>    HolderKey       string \`json:"holderKey\`<br>    HolderNamespace string \`json:"holderNamespace\`<br>    HolderGroup     string \`json:"holderGroup\`<br>    TxCode          string \`json:"tx_code\`<br>}                                                                                                                                                                                                                                                           | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| storage                  | storage.service.presentation               | subscribe | type StorageServiceStoreMessage struct {<br>    common.Request<br>    AccountId   string \`json:"accountId"\`<br>    Type        string \`json:"type"\`<br>    Payload     []byte \`json:"payload"\`<br>    ContentType string \`json:"contentType"\`<br>    Id          string \`json:"id"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                    | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| storage                  | storage.service.credential                 | subscribe | type StorageServiceStoreMessage struct {<br>    common.Request<br>    AccountId   string \`json:"accountId"\`<br>    Type        string \`json:"type"\`<br>    Payload     []byte \`json:"payload"\`<br>    ContentType string \`json:"contentType"\`<br>    Id          string \`json:"id"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                    | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| credential-verification  | verifier.presentation.authorization.remote | subscribe | type PresentationAuthorizationRemoteRequest struct {<br>    common.Request<br>    ClientId   string \`json:"clientId"\`<br>    RequestUri string \`json:"request_uri"\`<br>    Ttl        int    \`json:"ttl"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| issuance-service         | pre.auth.request.v1                        | request   | type TwoFactor struct {<br>Enabled          bool   \`json:"enabled"\`<br>RecipientType    string \`json:"recipientType"\`<br>RecipientAddress string \`json:"recipientAddress"\`<br>}<br><br>type GenerateAuthorizationReq struct {<br>    common.Request<br>    TwoFactor                 TwoFactor \`json:"twoFactor"\`<br>    CredentialConfigurationId string   \`json:"credential_configuration_id"\`<br>    CredentialIdentifier      []string \`json:"credential_identifier"\`<br>    Nonce                     string    \`json:"nonce"\`<br>}                                                                                                                                                | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| issuance-service         | auth.authorization.validate.v1             | request   | type ValidateAuthenticationReq struct {<br>common.Request<br>Params ValidateAuthenticationReqParams<br>}<br><br>type ValidateAuthenticationReqParams struct {<br>Key string \`json:"key"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| pre-authorization-bridge | didcomm.pin.v1                             | request   | type didCommEvent struct {<br>    Subject        string \`json:"subject"\`<br>    DidCommAddress string \`json:"didCommAddress"\`<br>    Body           string \`json:"body"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                    |
| pre-authorization-bridge | email.pin.v1                               | request   | type emailEvent struct {<br>    Subject      string \`json:"subject"\`<br>    EmailAddress string \`json:"to-email"\`<br>    Body         string \`json:"body"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                    |
| credential-retrieval     | signer.signToken                           | request   | type CreateTokenRequest struct {<br>    common.Request<br>    Namespace string \`json:"namespace"\`<br>    Group     string \`json:"group"\`<br>    Key       string \`json:"key"\`<br>    Payload   []byte \`json:"payload"\`<br>    Header    []byte \`json:"header"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                         | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| status-list              | signer.signToken                           | request   | type CreateTokenRequest struct {<br>    common.Request<br>    Namespace string \`json:"namespace"\`<br>    Group     string \`json:"group"\`<br>    Key       string \`json:"key"\`<br>    Payload   []byte \`json:"payload"\`<br>    Header    []byte \`json:"header"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                         | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| signer                   | signer.createKey                           | reply     | type CreateKeyReply struct {<br>common.Reply<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common                                                                               |
| signer                   | signer.signToken                           | reply     | type CreateTokenReply struct {<br>    common.Reply<br>    Token []byte \`json:"token"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common                                                                               |
| signer                   | signer.error                               | reply     | type Error struct {<br>Status int    \`json:"status"\`<br>Id     string \`json:"id"\`<br>Msg    string \`json:"msg"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                    |
| issuance-service         |  credential.offer.url.v1                   | reply     | type OfferingURLResp struct {<br>    common.Reply<br>    CredentialOffer credential.CredentialOffer<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"<br>"gitlab.eclipse.org/eclipse/xfsc/libraries/ssi/oid4vip/model/credential" |
| pre-authorization-bridge | auth.authorization.generate                | reply     | type GenerateAuthorizationRep struct {<br>common.Reply<br>\*Authentication<br>}<br><br>type Authentication struct {<br>Token                     string            \`json:"token"\`<br>Code                      string            \`json:"code"\`<br>Nonce                     string            \`json:"nonce"\`<br>Pin                       string            \`json:"pin"\`<br>ExpiresAt                 time.Time         \`json:"expires_at"\`<br>CredentialConfigurationId string             \`json:"credential_configuration_id"\`<br>CredentialIdentifier      []string          \`json:"credential_identifier"\`<br>TxCode                    \*credential.TxCode \`json:"tx_code"\`<br>} | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| pre-authorization-bridge | auth.authorization.validate.v1             | reply     | type ValidateAuthenticationRep struct {<br>    common.Reply<br>    Valid                     bool     \`json:"valid"\`<br>    Nonce                     string   \`json:"nonce"\`<br>    CredentialConfigurationId \*string \`json:"credential_configuration_id"\`<br>    CredentialIdentifier      []string \`json:"credential_identifier"\`<br>}                                                                                                                                                                                                                                                                                                                                                    | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| issuance-plugin          | dummycontentsigner                         | reply     | type IssuanceModuleRep struct {<br>    common.Reply<br>    Credential any<br>    Format     string<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| issuance-plugin          | credential.offer.url.v1                    | reply     | type IssuanceReply struct {<br>    common.Reply<br>    Offer credential.CredentialOffer \`json:"offer"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| credential-verification  | verifier.presentation.authorization        | reply     | type PresentationAuthorizationCreationReply struct {<br>    BaseReply      common.Reply<br>    PresentationId string \`json:"presentation_id"\`<br>    RequestUri     string \`json:"request_uri"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| status-list              | create                                     | reply     | type CreateStatusListEntryReply struct {<br>    common.Reply<br>    Index     int    \`json:"index"\`<br>    StatusUrl string \`json:"statusUrl"\`<br>    Type      string \`json:"type"\`<br>    Purpose   string \`json:"purpose"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                            | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| status-list              | verify                                     | reply     | type VerifyStatusListEntryReply struct {<br>    common.Reply<br>    Revocated bool \`json:"revocated"\`<br>    Suspended bool \`json:"suspended"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| issuance-plugin          | wellknown.issuer.registration              | publish   | type IssuerRegistration struct {<br>    common.Request<br>    Issuer credential.IssuerMetadata \`json:"issuer"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"<br>"gitlab.eclipse.org/eclipse/xfsc/libraries/ssi/oid4vip/model/credential" |
| credential-retrieval     | retrieval.offering.received                | publish   | type RetrievalNotification struct {<br>    common.Request<br>    Offer credential.CredentialOfferParameters \`json:"offerParams"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"<br>"gitlab.eclipse.org/eclipse/xfsc/libraries/ssi/oid4vip/model/credential" |
| credential-retrieval     | storage.service.credential                 | publish   | type StorageServiceStoreMessage struct {<br>    common.Request<br>    AccountId   string \`json:"accountId"\`<br>    Type        string \`json:"type"\`<br>    Payload     []byte \`json:"payload"\`<br>    ContentType string \`json:"contentType"\`<br>    Id          string \`json:"id"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                    | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| credential-verification  | verifier.presentation.authorization.remote | publish   | type PresentationAuthorizationRemoteReply struct {<br>    common.Reply<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| credential-verification  | verifier.proof.notification                | publish   | type ProofNotifyEvent struct {<br>    common.Reply<br>    PresentationId string \`json:"presentation_id"\`<br>    Status         string \`json:"status"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
| credential-verification  | storage.service.presentation               | publish   | type StorageServiceStoreMessage struct {<br>    common.Request<br>    AccountId   string \`json:"accountId"\`<br>    Type        string \`json:"type"\`<br>    Payload     []byte \`json:"payload"\`<br>    ContentType string \`json:"contentType"\`<br>    Id          string \`json:"id"\`<br>}                                                                                                                                                                                                                                                                                                                                                                                                    | "gitlab.eclipse.org/eclipse/xfsc/organisational-credential-manager-w-stack/libraries/messaging/common"                                                                             |
