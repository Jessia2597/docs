= Federation Architecture for Composed Infrastructure Services (FACIS)

Enhancement of

XFSC Federated Catalogue

Table of Contents

1 Introduction link:#introduction[3]

1.1 Document Purpose link:#document-purpose[3]

1.2 Product Enhancement Scope link:#product-enhancement-scope[3]

1.3 Definitions, Acronyms and Abbreviations
link:#definitions-acronyms-and-abbreviations[4]

1.4 References link:#references[5]

1.5 Document Overview link:#document-overview[5]

2 Product Overview link:#product-overview[5]

2.1 Product Perspective link:#product-perspective[5]

2.2 Product Functions link:#product-functions[6]

2.2.1 Existing Product Functions link:#existing-product-functions[6]

2.2.2 Asset Management link:#asset-management[7]

2.2.3 Lifecycle Management, Logging, and Versioning
link:#lifecycle-management-logging-and-versioning[8]

2.2.4 Access Control link:#access-control[8]

2.2.5 Storage and Format Requirements
link:#storage-and-format-requirements[8]

2.3 Product Constraints link:#product-constraints[8]

2.4 User Classes and Characteristics
link:#user-classes-and-characteristics[9]

2.5 Operating Environment link:#operating-environment[9]

2.6 User Documentation link:#user-documentation[9]

2.7 Assumptions and Dependencies link:#assumptions-and-dependencies[9]

2.8 Apportioning of Requirements link:#apportioning-of-requirements[9]

3 Requirements link:#requirements[10]

3.1 Functional Requirements link:#functional-requirements[10]

3.1.1 Asset Management link:#asset-management-1[10]

3.1.2 Graph Database link:#graph-database[10]

3.1.3 Lifecycle Management, Logging, and Versioning
link:#lifecycle-management-logging-and-versioning-1[12]

3.1.4 Access Control link:#access-control-1[12]

3.1.5 Storage and Format Requirements
link:#storage-and-format-requirements-1[13]

3.1.6 Compliance, Trust, and Validation
link:#compliance-trust-and-validation[13]

3.1.7 Administration User Interface
link:#administration-user-interface[15]

3.2 Non-functional Requirements link:#non-functional-requirements[15]

3.3 Design and Implementation link:#design-and-implementation[15]

4 System Features link:#system-features[16]

4.1 Non-RDF Assets link:#non-rdf-assets[16]

4.2 External Trust Framework Interface
link:#external-trust-framework-interface[18]

5 Verification link:#verification[18]

6 Appendix link:#appendix[21]

6.1 Digital Contracting Service (DCS): Template Repository
link:#digital-contracting-service-dcs-template-repository[21]

* +
*

== Introduction

This document provides the technical specifications for new
functionalities of the Eclipse XFSC Federated Catalogue (CAT).

The purpose of this tender is to commission software development
services for lot Federated Catalogue Enhancements by using the Eclipse
Project XFSC as the foundation
(https://projects.eclipse.org/projects/technology.xfsc). The delivery of
the software is provisionally by Q2 of 2026. The final clarification
will be communicated after the award of the tender.

=== Document Purpose 

This document specifies the requirements for new functionalities of the
CAT. It serves as a formal specification that outlines the system’s new
functional and non-functional requirements, as well as its technical
constraints, architectural context, and verification methods. The
primary objective of the CAT is to enable trustworthy management of
metadata, provide functions for managing data and service offerings, and
support of the negotiation of digital contracts.

This specification is prepared in the context of tendering. The intended
audience is potential contractors able to deliver an open-source
solution that implements the defined requirements.

=== Product Enhancement Scope

The CAT, as a tool for trustworthy management of metadata, fundamentally
provides functions for managing data and service offerings, supporting
the negotiation of digital contracts, and potentially for other purposes
such as documenting transactions. Currently, however, its implementation
is very closely tied to the Gaia-X ecosystem and also offers
functionalities that go beyond pure cataloguing (e.g., verification of
credentials). Therefore, this document specifies changes and extensions
to the CAT to make it lightweight, usable in broader application
scenarios, and to bring it up to the current state of the art. This
includes changes to the graph database, its interaction with trust
anchors, as well as enabling an easier setup by administrators.

The product enhancement scope consists of the following four points:

* Easier deployment, admin tooling for easier configurability (e.g.,
operation with interchangeable graph database backends or even without
them), and easier use in Federation Architecture Patterns (FAPs) and
other federated workflows, especially those defined with the XFSC
Orchestration Engine (XFSC ORCE).
* Easier and more flexible usability of the functions needed for
implementing the XFSC Digital Contracting Service (DCS), such as storing
(meta)data objects (here generically called “assets”) in formats other
than RDF/JSON-LD and schemas (to validate assets against) in formats
other than SHACL, OWL, and SKOS; assignment of identifiers; logging of
transactions.
* Updating the standards used for credentials (e.g., Verifiable
Credentials Data Model 2.0 ++[++VC++]++, Enveloping Proofs) to the
Gaia-X releases Loire (2024), thus also paving the path to the Danube
release expected for end of 2025, ...
* ... while not being exclusively dependent on Gaia-X, so that other
standards for establishing trust (e.g., verification of digital
signatures against other trust anchors) can be used.

For aspects of the CAT not covered by these points, the product scope of
the original GXFS Federated Catalogue SRS from 2021 ++[++FC.CCF.SRS++]++
still applies.

=== Definitions, Acronyms and Abbreviations

_Table 1 – List of Acronyms and Abbreviations_

[width="99%",cols="17%,24%,59%",options="header",]
|===
|*Acronym or Abbreviation* |*Term* |*Definition*
|API |Application Programming Interface a|
A set of rules and protocols for building and interacting with

software applications, enabling communication between

different systems.

|CAT |Federated Catalogue  |A service for publishing, discovering, and
requesting assets within the federation.

|DCS |Digital Contracting Service |A component to support contract
lifecycle management in federated cloud and edge service environments

|DID |Decentralized Identifier |A globally unique identifier enabling
verifiable, self-sovereign digital identity.

|FACIS |Federation Architecture for Composed Infrastructure Services
|FACIS project is part of the Important Projects of Common European
Interest – Cloud Infrastructure and Services (8ra/IPCEI-CIS) initiative,
which aims to establish a Multi-Provider Cloud-Edge Continuum across
Europe. 

|FAP |Federation Architecture Pattern |Modular, reusable architectural
blueprints specified in the FACIS project to support the creation and
operation of interoperable and scalable federated digital ecosystems,
designed for multi-stakeholder environments

|JSON-LD |JavaScript Object Notation for Linked Data a|
A JSON-based format to serialize Linked Data, i.e., RDF,

enabling integration with semantic web technologies.

|RBAC |Role-Based Access Control |A security model that restricts system
access based on users’ roles and assigned permissions.

|RDF |Resource Description Framework |W3C standard model for data
interchange on the web.

|SHACL |Shapes Constraint Language |W3C language for validating RDF
graphs against a set of conditions

|SPARQL |SPARQL Protocol and Query Language |W3C language to query RDF
graphs

|TR |Template Repository a|
DCS software component for storing and managing contract

templates in both machine-readable and human-readable

formats.

|UUID |Universally Unique Identifier a|
A 128-bit identifier used to uniquely identify information in

computer systems.

|VC |Verifiable Credential a|
A cryptographically verifiable statement issued about a

subject, following the W3C standard.

|===

=== References

_Table 2 – List of References_

[width="99%",cols="20%,29%,51%",options="header",]
|===
|*Reference ID* |*Description* |*Link*
|++[++CAT.AD++]++ |CAT Architecture Document
|https://github.com/eclipse-xfsc/federated-catalogue

|++[++FACIS.DCS.SRS++]++ |SRS for the Digital Contracting Service (DCS)
|https://github.com/eclipse-xfsc/facis/tree/main/DCS

|++[++FACIS.FAP.DCM++]++ |The Decentralized Catalogue Management FAP
|https://www.facis.eu/about-facis/federation-architecture-pattern/fap-decentralized-catalogue-management/

|++[++FC.CCF.SRS++]++ |SRS for the GXFS Federated Catalogue – Core
Catalogue Features (FC.CCF) |https://www.gxfs.eu/download/1740/

|++[++GAIAX.CO++]++ |Gaia-X Compliance Document – 25.03 Release
|https://docs.gaia-x.eu/policy-rules-committee/compliance-document/25.03/

|++[++GAIAX.ICAM++]++ |Gaia-X Identity, Credentials and Access
Management Document – 24.10 Release
|https://docs.gaia-x.eu/technical-committee/identity-credential-access-management/24.07/

|++[++SHACL++]++ |W3C Shapes Constraint Language
|https://www.w3.org/TR/shacl/

|++[++SPARQL++]++ |W3C SPARQL 1.2 Query Language
|https://www.w3.org/TR/sparql12-query/

|++[++VC++]++ |W3C Verifiable Credentials Data Model v2.0
|https://www.w3.org/TR/vc-data-model-2.0/
|===

=== Document Overview

The document describes the product perspective, functions, and
constraints. It furthermore lists the functional and non-functional
requirements and defines the system features in detail. The listed
requirements are binding. The keywords MUST, MUST NOT, SHOULD, SHOULD
NOT, MAY, corresponding to RFC 2119 ++[++RFC 2119++]++, are written in
capital letters.

== Product Overview

=== Product Perspective

The product perspective has been described already in the initial SRS
for the GXFS (now XFSC) Federated Catalogue ++[++FC.CCF.SRS++]++. The
general structure of the CAT and most of the functionalities described
there stay unchanged, so this section only describes the perspective of
the new or changed functionalities of the CAT.

The existing specification of the CAT already defines how to implement a
graph database used for storing and retrieving (querying) information
from the assets managed by the CAT. While the existing implementation is
realized using a Neo4j database, the CAT should also support RDF triple
stores. When deploying an instance of the CAT it MUST be possible to
decide if one wants to use a property graph database queryable in
openCypher, or an RDF triple store. When complex queries over the assets
are not required, it SHOULD also be possible to refrain from using a
graph database at all and solely rely on the provided PostgreSQL
database, which contains metadata about the lifecycle of the assets in
the catalogue. In general, the deployment of the CAT should be
simplified through the implementation of an administration view, through
which all initial parameters can be set when deploying the CAT.

The CAT should be able to function as a template repository as specified
in the SRS of the DCS ++[++FACIS.DCS.SRS++]++ (cf. Figure 1). This
requires small to medium changes in the way the CAT functions with
regard to Storage and Format Requirements, Version Control, Auditing and
Logging, Access Control, Object Type Classification, and Lifecycle
Management.

In order to serve a broader selection of use cases (such as the
application as template repository) some hard restrictions regarding the
Gaia-X ecosystem are to be removed. This means the catalogue should no
longer be verifying incoming credentials against the Gaia-X Trust
Framework before storing them.

image:media/image2.png[media/image2]

Instead, it should be possible to verify a stored credential against any
given trust framework (optionally including that of Gaia-X), or not at
all, and the CAT should set the status of the credential accordingly.

Figure 1: Simplified DCS Diagram

=== Product Functions

The CAT according to this specification inherits most functions from its
initial specification and implementation, as summarized in the first
subsection of this section. The subsequent subsections address the new
functions introduced by this specification.

==== Existing Product Functions

Figure 2: High-level Architecture of the CAT ++[++1++]++

While the general descriptions of the product functions stay the same,
the actual implementation will change in order for the CAT to be usable
in more varied scenarios (e.g., use cases outside of the Gaia-X
ecosystem). The updates to the product functions will be described in
the following sections. This includes the requirements to function as a
template repository for the DCS. The Template Repository serves as the
central storage and management system for contract templates. It enables
structured template lifecycle management, from creation and approval to
versioning and retirement, while ensuring compliance, traceability, and
role-based access control.

==== Asset Management

*Identification*

The CAT should support arbitrary metadata for a variety of assets. This
makes the CAT more generally usable and not only in the confined space
of Gaia-X-based federations. These assets should include the types
necessary for the catalogue to serve as a template repository for the
DCS. All assets handled by the CAT must have, or otherwise be assigned,
a globally unique identifier to ensure their traceability.

*Compliance and Validation*

The CAT should no longer check for compliance and validity at the moment
the assets are submitted to the CAT. Instead, this check can be
performed on stored assets at any given time against arbitrary trust
frameworks (not only the Gaia-X one). That way, the compliance of an
asset can be confirmed for a specific point in time and can be
re-checked if the underlying trust framework evolves, and can be checked
against multiple different trust models, e.g., general as well as
sector-specific ones.

*Graph Database*

The CAT currently supports the usage of a property graph database,
meeting the requirement to support openCypher queries. From now on, the
CAT is more agnostic with regard to the type of graph database used. The
user will have the choice between using a property graph database or an
RDF triple store. This also leads to the support of an additional
querying language, namely SPARQL-star ++[++SPARQL++]++.

==== Lifecycle Management, Logging, and Versioning

The CAT enables the creation, update, deletion, and deprecation of
assets, i.e., transitions between lifecycle states. Changes to an asset
will result in new versions of this asset. It is possible to retrieve
the current and all old versions of an asset from the CAT. All
transitions of the state of the lifecycle of an asset are recorded in an
audit log.

==== Access Control

The current access control of the CAT will be broadened by adding user
roles to define in a fine-grained way what creation, modification,
deprecation, or deleting steps can be conducted.

==== Storage and Format Requirements

The CAT stores all assets in a structured, machine-readable format. This
includes RDF and non-RDF data models. For all assets, the content will
be stored as submitted to the CAT, e.g., as a file in the file system.
When storing an RDF asset, all RDF triples will be stored in the graph
database in addition to storing the originally submitted content in the
asset storage.

All assets are given a unique identifier. RDF assets already have one
built in, for other assets one needs to be created when storing the
file. It must be possible to add additional metadata about an asset by
uploading an RDF graph with the asset’s ID as subject. For RDF assets,
this can be done using the update functionality of the CAT. For non-RDF
assets, a new endpoint is created to achieve this. This way, it is
possible to add queryable information (such as an asset type) about
non-RDF assets to the graph database.

It is possible to define relations between assets, including
hierarchical structures and dependencies, by adding, in the same way,
RDF triples that express these relations, provided that these relations
are defined in an OWL ontology that has been submitted to the CAT
before, e.g., _ex:Asset1 onto:isPartOf ex:Asset2_ (example given in the
Turtle serialization of RDF).

If an additional human-readable representation of an asset is stored, a
bidirectional link between this and the machine-readable representation
of the same asset will be created.

The CAT supports schemas for the validation of RDF and non-RDF assets;
all schemas are stored in a machine-readable format.

=== Product Constraints

The Product Constraints are described in the original SRS for the GXFS
Federated Catalogue ++[++FC.CCF.SRS++]++. These remain largely
unchanged, although with this update of the CAT some of the product
features become more generally applicable, which loosens some of the
originally defined constraints. This section describes the loosened
constraints.

*Self-Description Format*

Currently the CAT only supports Credentials in the JSON-LD serialization
of RDF, with signatures according to the Verifiable Credentials Data
Model v1.0. The initial specification ++[++FC.CCF.SRS++]++ calls these
credentials “self-descriptions”. From now on, in addition to an upgrade
to the Verifiable Credentials Data Model v2.0 ++[++VC++]++, the CAT
should also support storing other RDF graphs, which contain information
that can be validated against some schema, not only Verifiable
Credentials.

*Query and Filter Functions*

Currently, the CAT requires support of the query language openCypher;
SPARQL support was specified as optional but not initially implemented.
From now on, this is not a hard constraint anymore. While supporting
openCypher should still be an option, it is also sufficient to support
only SPARQL, when using only a triple store as graph database; however,
we require a recent triple store that supports SPARQL-star
++[++SPARQL++]++. Additionally, it should be possible to run a CAT
instance without a graph database.

*Federation of Catalogues*

Regarding the Federation of Catalogues this document will not introduce
or weaken any previously defined constraints, but this topic will be
revisited by an upcoming separate specification for the “Decentralized
Catalogue Management” Federation Architecture Patterns defined by the
FACIS project ++[++FACIS.FAP.DCM++]++.

=== User Classes and Characteristics

The user classes and characteristics are described in detail in chapter
2.4 of the GXFS Federated Catalogue SRS ++[++FC.CCF.SRS++]++.

=== Operating Environment

The GXFS Federated Catalogue SRS ++[++FC.CCF.SRS++]++ describes the
operation of the CAT in a Gaia-X ecosystem. It MUST still be possible to
operate the CAT in such an environment, but the CAT is no longer
designed to be operated solely in such an environment but can be
operated in other environments as well. This means all restrictions
limiting the catalogue to be used in a Gaia-X environment will be
removed from the core of the CAT and instead made optional by the
possibility of communicating with an external interface that validates
credentials stored in a CAT instance against the Gaia-X Trust Framework.

=== User Documentation

The documentation of the CAT is done using GitHub repositories. Two
different repositories exist:

[arabic]
. *XFSC Federated Catalogue repository*

This repository contains user documentation contains the user
documentation as required by the GXFS Federated Catalogue SRS
++[++FC.CCF.SRS++]++.

[arabic, start=2]
. *Architecture Document for the CAT*

This repository contains a pipeline to automatically create the
Architecture Document ++[++CAT.AD++]++ of the CAT from a human-readable
source (AsciiDoc). Any changes to the architecture of the CAT and to the
underlying design decisions MUST be documented in the Architecture
Document.

=== Assumptions and Dependencies

Except for deviations explicitly laid out in this specification, the
requirements of the GXFS Federated Catalogue SRS ++[++FC.CCF.SRS++]++
continue to apply.

=== Apportioning of Requirements

The functional requirements of the CAT enhancement are allocated to
specific software elements within the system’s architecture. Each
functional requirement is mapped to the component responsible for its
implementation, as seen in Section 3.1.

== Requirements

=== Functional Requirements

==== Asset Management

*++[++CAT-FR-AM-01++]++ Asset Creation*

The system MUST allow a user to store a new asset in the catalogue. This
MUST now also include assets in formats other than RDF.

*++[++CAT-FR-AM-02++]++ Asset IRI Assignment*

Each catalogue asset MUST be identified by an IRI. The CAT MUST support
at least the following two identifiers:

[arabic]
. DIDs
. UUIDs as URNs as specified by RFC 4122
(https://www.rfc-editor.org/rfc/rfc4122)

Note: For credentials (formerly called “self-descriptions”), OWL
ontologies and SKOS concept schemes, the mechanisms to extract
identifiers from the uploaded assets remain in place as specified by
++[++FC.CCF.SRS++]++.

*++[++CAT-FR-AM-03++]++ Asset Metadata Enrichment*

It MUST be possible to add metadata information (e.g., information about
the type of asset) about non-RDF asset to the graph DB. Therefore, it
MUST be possible to add an RDF graph to the graph DB, which contains
triples that have the ID of a non-RDF asset as subject. The upload of
such RDF graphs MUST be supported via the same endpoint to which
otherwise RDF assets (e.g., Verifiable Credentials) are uploaded.

==== Graph Database

*++[++CAT-FR-GD-01++]++ Extraction of Credential Claims to the Graph
Database*

From any assets that are Gaia-X Credentials according to how the Gaia-X
Identity, Credential and Access Management Document v24.07
++[++GAIAX.ICAM++]++ interprets the Verifiable Credentials Data Model
v2.0 specification ++[++VC++]++, or from Verifiable Presentations
containing Gaia-X Credentials, the CAT MUST extract all claims to the
graph database, i.e., the graph obtained by starting from each
credential subject and following the outgoing edges, intersected with
all RDF triples contained in the Verifiable Credential or Presentation.

Note: This coincides with the requirements specified in the GXFS
Federated Catalogue SRS ++[++FC.CCF.SRS++]++ and merely updates them to
the state of the art at the point of releasing this specification.

*++[++CAT-FR-GD-02++]++ Extraction of Non-Credential Claims to the Graph
Database*

From any RDF assets that are not Gaia-X Credentials as specified in
CAT-FR-GD-01, the CAT MUST extract all triples into the graph database.

Note: This generalizes CAT-FR-GD-01 beyond credentials, taking into
account the RDF functionality that the CAT has already supported in the
area of schemas.

*++[++CAT-FR-GD-03++]++ Graph Database Backend*

The CAT MUST have a graph database backend queryable in openCypher, as
well as a graph database backend queryable in SPARQL-star
++[++SPARQL++]++.

*++[++CAT-FR-GD-04++]++ Graph Query Language*

The CAT MUST support the query languages openCypher and SPARQL-star
++[++SPARQL++]++, based on the graph backend used at runtime.

*++[++CAT-FR-GD-05++]++ Query Interface*

The CAT MUST offer a query interface that has a parameter for specifying
the language of the query (_application/opencypher-query_ for
openCypher, or _application/sparql-query_ for SPARQL-star).

*++[++CAT-FR-GD-06++]++ Query Language Validation*

The CAT MUST reject queries in the query language of any non-active
graph database backend.

*++[++CAT-FR-GD-07++]++ Switchable Graph Database*

The CAT MUST have a configuration option for enabling or disabling any
graph databases without recompilation.

Note:

The CAT MUST handle graph database switches with a non-empty set of
stored RDF objects. This means that the graph database might be empty or
in an outdated state when the Catalogue is started, compared to the full
set of RDF objects stored separately.

*++[++CAT-FR-GD-08++]++ Storing Credential Claims*

In the RDF-star database, each claim from an asset that is a credential
MUST be stored as a statement wrapped into an enclosing statement
linking it to the credential’s _subjectId_. This is required to have
unique statements that can be deleted with the credential.

*++[++CAT-FR-GD-09++]++ Protected RDF Namespace*

The CAT MUST reserve the RDF namespace
https://projects.eclipse.org/projects/technology.xfsc/federated-catalogue/meta[[.underline]#https://projects.eclipse.org/projects/technology.xfsc/federated-catalogue/meta##]
for internal purposes. Triples using terms in this namespace may only be
added to the graph database by internal processes of the CAT. Where the
extraction of claims from assets uploaded to the CAT according to
CAT-FR-GD-01 or CAT-FR-GD-02, or asset metadata enrichment according to
CAT-FR-AM-03, or the import of schemas yields such triples, these
triples MUST be discarded, and a warning MUST be issued.

==== Lifecycle Management, Logging, and Versioning

*++[++CAT-FR-LM-01++]++ Asset Update Management and Version Control*

The CAT MUST allow authorized users to update existing assets, while
maintaining the full version history and linking updated versions of an
asset to previous versions of the same asset. As storage of historical
revisions is mainly required for auditability purposes, it MAY be
implemented via a secure communication channel to an external system,
instead of keeping these revisions accessible randomly from the CAT’s
main database.

*++[++CAT-FR-LM-02++]++ Asset Provenance and Versioning*

The repository MUST support the ability for a user to add provenance
claims to each asset version. For non-RDF assets this can be done
according to CAT-FR-AM-03. Provenance and versioning assertions SHALL be
linked and MUST be verifiable using W3C Verifiable Credentials
++[++VC++]++ in JSON-LD. Users MUST be able to verify the provenance of
a given asset by verifying its provenance credentials. Linking the
provenance credentials to the asset MUST NOT result in a new version of
the asset.

*++[++CAT-FR-LM-03++]++ Audit Logs for Asset Changes*

The system MUST maintain an audit log that records all creation,
modification, and deletion activities.

Note: Like explained for CAT-FR-LM-01, activities MAY be logged to an
external system via a secure communication channel.

*++[++CAT-FR-LM-04++]++ Asset Scope in Lifecycle Management*

The management of an asset’s lifecycle MUST cover, in addition to the
asset itself,

* any metadata extracted from the asset according to CAT-FR-GD-01 and
CAT-FR-GD-02, or added to the asset according to CAT-FR-AM-03, or added
to the asset according to CAT-FR-CO-02, and
* a human-readable representation of the asset according to
CAT-FR-SF-03.

==== Access Control

*++[++CAT-FR-AC-01++]++ Role-Based Access Control for Asset Management*

The current RBAC contains a user role that enables asset management
(Create, Read, Update and Delete). This role MUST be made more
adjustable, to enable granting permission for none, one, several or all
of these operations.

*++[++CAT-FR-AC-02++]++ Credentials-based Role Assertions*

RBAC shall be managed via role assertions in the form of a Verifiable
Credential ++[++VC++]++ stored in wallets of users and presented during
the authentication and authorization process of a user.

==== Storage and Format Requirements

*++[++CAT-FR-SF-01++]++ Non-RDF Schema Storage*

The CAT already supports schema storage for machine-readable RDF schemas
(e.g., OWL, SHACL). The CAT MUST also support the management of
machine-readable non-RDF schemas (including, but not limited to, JSON
Schema and XML Schema).

*++[++CAT-FR-SF-02++]++ Schema Versioning*

The schema management of the CAT SHALL support versioning of the
schemas.

*++[++CAT-FR-SF-03++]++ Linking of Machine-Readable and Human-Readable
Assets*

In addition to the machine-readable representation of an asset, it MUST
be possible to also add a human-readable representation (e.g. PDF) of
this asset to the CAT. Between these two assets, a bidirectional link
MUST exist.

*++[++CAT-FR-SF-04++]++ Remove forced validation against stored schemas*

Currently the CAT validates against all stored SHACL shapes when storing
an asset in the catalogue, as specified in ++[++FC.CCF.SRS++]++. This
validation step MUST be removed. Instead, the validation MAY be
performed on stored assets against specific SHACL shapes, as specified
in CAT-FR-CO-05.

==== Compliance, Trust, and Validation

*++[++CAT-FR-CO-01++]++ No hard-coding of the Gaia-X Trust Framework*

The hard-coded requirements for the assets stored in the CAT to be
compliant to the Gaia-X Trust Framework MUST be removed from the code.
Note: With this step, it is no longer required that credentials uploaded
to the CAT be compliant with any trust framework.

*++[++CAT-FR-CO-02++]++ Compliance and Validation Result Representation*

To enable querying the results of compliance checks and schema
validation, they MUST be stored in the CAT in a tamper-proof way and
MUST include the following information:

[arabic]
. the ID(s) of the asset(s) that was/were checked,
. a unique identifier of the reference that was checked against (trust
framework or schema(s)),
. the date and time when the check was performed,
. a boolean value telling whether or not the check was successful, and
. optionally further information obtained during the check or
validation.

This information SHALL be added to the graph database to be queryable.
It MUST NOT be possible for any user of the CAT to add such triples to
the graph database. Therefore, the properties in these triples MUST be
in the CAT’s protected RDF namespace defined in
CAT-FR-GD-09.*++[++CAT-FR-CO-03++]++ External Trust Framework Interface*

It MUST be possible to request a compliance check of any stored asset
against different trust anchors via an API endpoint. It MUST be possible
to check one asset against the trust anchors of multiple trust
frameworks. The result of such a compliance check MUST be stored in the
CAT according to CAT-FR-CO-02 and extending that requirement as follows:

* in addition to (2.), also a unique identifier of the remote service
that performed the check MUST be stored (e.g., one of many Gaia-X
Digital Clearing House implementations),
* as further information (5.), in particular a compliance credential
MUST be stored.

Note: At the time of publishing this specification, the Gaia-X Meta
Registry Ontology is
emergingfootnote:[https://gitlab.com/gaia-x/lab/gaia-x-danube-components/gaia-x-meta-registry],
which enables references to arbitrary ecosystems and their trust service
providers, beyond Gaia-X's own compliance specification. This ontology
MAY be used to represent the above information.

*++[++CAT-FR-CO-04++]++ Gaia-X Digital Clearing House*

The functionality of the external trust framework interface SHALL be
demonstrated by realizing such an interface for the Gaia-X Digital
Clearing House, following the compliance specifications of the Gaia-X
Loire Release ++[++GAIAX.CO++]++.

*++[++CAT-FR-CO-05++]++ On-demand Validation of Assets against Schemas*

The CAT MUST provide an endpoint through which it is possible to
validate one or more stored asset against one or more or all stored
schemas. This means the endpoint MUST take the asset ID(s) and the
schema ID(s) as parameters and then validates the given asset(s) against
all applicable schema(s) as follows:

[arabic]
. Validating RDF against SHACL:
[arabic]
.. All given RDF assets are taken together to form a _data graph_
according to the ++[++SHACL++]++ specification.
.. All given schemas that are SHACL shapes are taken together to form a
_shapes graph_ according to the ++[++SHACL++]++ specification.
.. The data graph is validated against the shapes graph.
. Validating against non-RDF schemas: every given asset is validated
individually against every applicable schema.

The results of the validation MUST be stored in the CAT according to
CAT-FR-CO-02 and extending that requirement as follows:

* as further information (5.), a validation report MUST be stored if one
was generated, e.g., by a SHACL validation.

Note: Regarding the applicability of schemas to assets, the following
holds:

* A JSON Schema is applicable to an RDF asset that is serialized in
JSON-LD, and to any other asset in JSON format.
* An XML Schema is applicable to an RDF asset that is serialized in
RDF/XML, and to any other asset in XML format.

==== Administration User Interface

*++[++CAT-FR-AU-01++]++ Administration User Interface*

The CAT MUST have a user interface accessible to users holding the
administrator role (Ro-MU-CA ++[++FC.CCF.SRS++]++), which exposes the
following functionality:

* integrating the existing Keycloak admin console for user
managementfootnote:[documented at
https://github.com/eclipse-xfsc/federated-catalogue/blob/main/docker/README.md]
* for external trust frameworks as specified in CAT-FR-CO-03:
enabling/disabling implemented trust framework client modules;
configuring their unique identifiers,
* enabling/disabling validation implemented modules for validating
against supported schema languages as specified in CAT-FR-SF-01,
* configuring whether all assets should be instances of a certain type,
and, if so, what type(s), i.e., a generalization of what, in the old
hard-coding of the Gaia-X Trust Framework (cf. CAT-FR-CO-01) was called
“trust framework base classes” (Gaia-X Participant and Service Offering
according to ++[++FC.CCF.SRS++]++, later, in the implementation,
extended by Gaia-X Resource),
* switching the graph database backend as specified in CAT-FR-GD-07.

=== Non-functional Requirements

*++[++CAT-NFR-01++]++ Generic Naming of Internal and External
Identifiers*

Wherever this specification requires the CAT to behave more generally
than in its original version as specified in ++[++FC.CCF.SRS++]++, e.g.,
managing generic assets rather than credentials (called
“self-descriptions” in ++[++FC.CCF.SRS++]++), this MUST be reflected in
all names that the CAT uses or exposes, in all of the following places:

* Names of internal identifiers in the code, including source files,
classes, methods, variables, and database schema elements (to facilitate
maintenance)
* Names of identifiers exposed to the technical environment in which the
CAT is running, including its REST API, configuration options,
filesystem files created or expected to exist, log entries, and deployed
packages (to facilitate interoperability)
* Names exposed in labels to human users on the user interface (to
facilitate usability)

=== Design and Implementation

The design and implementation requirements of the CAT can be found in
the GXFS Federated Catalogue SRS. The implementation SHOULD remain
compliant with the design principles defined by Gaia-X but MUST NOT be
limited to these. This broadens the use case scenarios of the CAT, such
that it can be used in Gaia-X as well as other environments.

== System Features

The CAT system features are described in detail in the GXFS Federated
Catalogue SRS ++[++FC.CCF.SRS++]++. This section only describes new or
changed system features according to this Catalogue Enhancement SRS.

=== Non-RDF Assets

The CAT enhancement is designed to enable the CAT to handle not only RDF
assets, but also non-RDF assets. Yet, the existing functionality of
assigning metadata to these assets must remain in place to obtain the
functionality of querying the stored data. For this it must be possible
to add metadata information of a non-RDF asset using and RDF graph and
the asset ID as subject. The workflow in this case looks as follows, and
is further explained by Figure 3:

[arabic]
. A non-RDF asset is initially simply uploaded and stored as is in the
asset storage.
. It receives an ID – cf. requirement ++[++CAT-FR-AM-02++]++
. Then it should be possible to upload a JSON-LD asset (just RDF
triples, not packaged in a VC/VP), which contains triples with this ID
as the subject. This asset holds the RDF metadata for the non-RDF asset.
In terms of Lifecycle Management, the catalog should from then on treat
the non-RDF asset and its RDF metadata as a single unit.

Figure 3: Workflows for managing RDF and non-RDF Assets

=== External Trust Framework Interface

The UML Sequence Diagram in Figure 4 visualizes a typical workflow of
the CAT interacting with two external trust frameworks, assuming an
asset that complies with the first one but not with the second one.

Figure 4: Interaction with External Trust Frameworks

== Verification

This specification specifies small clusters of individual requirements
rather than comprehensive end-to-end usage scenarios. Therefore, the
implementation is verified by demonstrating that each requirement has
been satisfied individually. The following table specifies how to
validate each functional requirement.

[width="99%",cols="21%,79%",options="header",]
|===
|Functional Requirement |How to validate
|CAT-FR-AM-01 |Upload one text file and one binary file and expect
success

|CAT-FR-AM-02 |Upload one non-RDF asset and one SHACL shape, and ensure
that they are assigned IRIs. Demonstrate that code is in place to
generate both UUID URNs and DIDs.

|CAT-FR-AM-03 a|
[arabic]
. Upload one non-RDF asset, then upload an RDF graph containing one
(metadata) triple whose subject is the ID of the non-RDF asset. Expect
the content of the non-RDF asset to remain unchanged, and expect the new
triple to be queryable.
. Upload one RDF asset, then upload an RDF graph. Expect the latter RDF
graph to be recognized as a new version of the original RDF asset,
replacing it.

|CAT-FR-GD-01 a|
* To a CAT with an empty database, upload a Verifiable Credential VC₁
that corresponds to the Gaia-X specifications. Expect the claims about
its credential subjects to be extracted as RDF triples to the graph
database.

* Do the same for a Verifiable Presentation that contains VC₁. Expect
the same RDF triples to be extracted.

|CAT-FR-GD-02 |Upload an RDF/JSON-LD asset that contains one triple.
Expect this triple to be extracted to the graph database.

a|
CAT-FR-GD-03

CAT-FR-GD-04

a|
For a CAT instance configured with a graph database backend queryable in
openCypher, and, separately, for a CAT instance with a graph database
backend queryable in SPARQL-star, demonstrate the following steps:

[arabic]
. Upload an RDF asset containing at least one triple to the CAT.
. Run a query in the respective language that returns a non-empty result
set with information contained in this asset.

|CAT-FR-GD-05 |For each query language separately (openCypher and
SPARQL-star), demonstrate that the query endpoint accepts a request that
contains a parameter that specifies the query language.

|CAT-FR-GD-06 |To a CAT instance with an openCypher graph database, send
a SPARQL-star query, and vice versa.

|CAT-FR-GD-07 |Into a fresh CAT instance configured for 1. openCypher or
2. SPARQL-star, upload some RDF assets. Configure this CAT instance to
use the “other” graph database backend and query language (i.e., 1.
SPARQL-star, and 2. openCypher), restart as needed, and demonstrate the
execution of a query in the latter language.

|CAT-FR-GD-08 |Upload a credential. Run a SPARQL-star that returns each
claim from the credential, wrapped into an enclosing statement that
links the claim to the credential subject’s ID.

|CAT-FR-GD-09 a|
For each of the following cases, demonstrate that triples using terms
from the CAT’s protected RDF namespace are rejected:

* Upload of a credential according to CAT-FR-GD-01
* Upload of an RDF asset that is not a credential according to
CAT-FR-GD-02
* Asset metadata enrichment according to CAT-FR-AM-03
* Upload of an RDF schema (OWL, SHACL or SKOS) as already supported by
the CAT

|CAT-FR-LM-01 a|
[arabic]
. Upload an asset.
. Upload a new version of the same asset.
. Retrieve the latest version and the original version of the asset.

|CAT-FR-LM-02 a|
[arabic]
. Execute steps (1.) and (2.) as for CAT-FR-LM-01.
. For each version, add a separate Verifiable Credential that contains a
provenance claim.
. Retrieve these credentials from the CAT.
. Verify the credentials retrieved.

|CAT-FR-LM-03 a|
[arabic]
. Execute steps (1.) and (2.) as for CAT-FR-LM-01.
. Delete the asset.
. Demonstrate that for each step an entry can be retrieved from the
audit log that documents the respective step.

|CAT-FR-LM-04 a|
[arabic]
. Upload an asset.
. Make sure the following is present in addition to the asset:
[loweralpha]
.. metadata: add them, as specified in CAT-FR-AM-03, if the asset was a
non-RDF one.
.. a human-readable representation
. Upload a new version of the asset.
. Demonstrate that the metadata and the human-readable representation
are also linked to the new version of the asset.
. Delete the asset.
. Demonstrate that the metadata and the human-readable representation
have also been deleted.

|CAT-FR-AC-01 |Configure a role for any subset of the operation set
++{++ Create, Read, Update, Delete }.

|CAT-FR-AC-02 |Demonstrate the login of a user who presents to the CAT a
Verifiable Credential that states “I am holding role R”. If that user is
known to hold role R, the login is expected to succeed, and, when asked
for all roles held by the user, User and Session Management modul e of
the CAT should return a set including role R.

|CAT-FR-SF-01 |Demonstrate the upload of a JSON Schema.

|CAT-FR-SF-02 a|
[arabic]
. Upload a new schema.
. Upload a new version of the same schema.
. Retrieve the previous version of the schema.

|CAT-FR-SF-03 a|
[arabic]
. Upload an asset.
. For this asset, upload a human-readable representation.
. Present the asset, showing that it contains a link to the
human-readable representation.
. Present the human-readable representation of the asset, showing that
it contains a link to the machine-readable representation.

|CAT-FR-SF-04 a|
[arabic]
. Upload a SHACL shape
. Upload an asset that is not valid w.r.t. this SHACL shape. Expect
success.

|CAT-FR-CO-01 |Upload a credential that is valid w.r.t. the schema
defined by the Gaia-X Ontology does not otherwise conform with the
Gaia-X Compliance specification. Expect success.

|CAT-FR-CO-03 a|
[arabic]
. To demonstrate the basic functionality, without an actual remote trust
service, create a mock of such a service.
. Upload an asset that is expected to be compliant with the mock trust
framework.
. Request the asset’s compliance to be checked.
. Demonstrate by a query that the graph contains metadata about this
compliance check.
. Repeat steps (2.) to (4.) for a non-compliant asset.

|CAT-FR-CO-04 |Demonstrate the same as for CAT-FR-CO-03 but against a
Gaia-X Digital Clearing House compliant with the Gaia-X Loire Release
instead of a mock trust service. In addition, retrieve from the CAT the
Gaia-X Compliance Credential received from the Clearing House.

|CAT-FR-CO-05 a|
[arabic]
. Upload two SHACL shapes S₁ and S₂ and a JSON Schema J₁.
. Upload two RDF assets R₁ and R₂, which are expected to be valid w.r.t.
S₁, J₁, S₂ and S₁ ∪ S₂.
. Request validation of R₁ against S₁ and J₁, of R₁ against S₁ ∪ S₂, and
of R₁ ∪ R₂ against “all shapes”.

|CAT-FR-AU-01 |For each required functionality, demonstrate that it can
be configured and takes effect as specified by the underlying functional
requirement
|===

== Appendix

=== Digital Contracting Service (DCS): Template Repository

Enabling the catalogue to handle non-RDF assets also enables the
catalogue to function as a template repository for the DCS. The
following table shows how the requirements of this SRS relate to the
requirements of the DCS template repository (TR).

[width="100%",cols="24%,19%,57%",options="header",]
|===
|*CAT Enhancement Requirement (this specification)* |DCS TR Requirement
|Explanation
|CAT-FR-AM-01 a|
DCS-FR-TR-01

DCS-FR-TR-13

|The generalization of assets beyond Verifiable Credentials / Verifiable
Presentations represented in RDF/JSON-LD enables the creation of new
contract templates in arbitrary structured, machine-readable formats.
Appropriate permissions for users with the “Template Manager” role can
be realized via CAT-FR-AC-01.

|CAT-FR-AM-02 |DCS-FR-TR-11 |While the CAT had previously supported the
assignment of IDs to credentials and schemas, this mechanism is now
being extended to assets of any kind, thus particularly also to contract
templates.

|CAT-FR-AM-03 |DCS-FR-TR-27 |The CAT has always supported the definition
of new types by uploading custom OWL ontologies. CAT-FR-AM-03 “Asset
Metadata Enrichment” now enables the application of such types also to
non-RDF assets.

|– |DCS-FR-TR-24 |To enable the DCS TR to export “a fully assembled
contract structure (main contract, appendices, components)”, the DCS
should make these structural relationships of contracts known as to the
CAT as object properties in an appropriate OWL ontology, and the data to
be exported can be retrieved by a query that makes use of these
properties.

|CAT-FR-LM-01 |DCS-FR-TR-16 |While the CAT has previously supported
updates to existing credentials (now generalized to assets),
CAT-FR-LM-01 provides for an explicit representation of an asset’s
history.

|CAT-FR-LM-01 |DCS-FR-TR-17 |Combining CAT-FR-LM-01 with the existing
CAT's support of the lifecycle states “deprecated” and “end-of-life”
meets DCS-FR-TR-17, i.e., “support++[++ing++]++ the deprecation and
retirement of assets, while ensuring that outdated versions are
archived”.

|– |DCS-FR-TR-18 |The CAT already supports the deletion of credentials
(now: assets).

|– |DCS-FR-TR-19 |The DCS can implement the notion of an “active” and
“approved” template by a combination of appropriate ontology terms and
an interpretation of relevant lifecycle states of assets (here:
templates), and then realize the retrieval of such templates by custom
queries to the CAT.

|– |DCS-FR-TR-05 |CAT-FR-LM-01 enables tracking of changes and versions.
The process of “approving” an asset is out of the scope of the CAT. It
is up to the DCS to define a user role “Template Approver”. Successful
approval of a template can be recorded via custom metadata, as explained
above for DCS-FR-TR-19.

|CAT-FR-LM-02 |DCS-FR-TR-09 |This CAT requirement directly translates to
the respective DCS requirement.

|– |DCS-FR-TR-08 |Via CAT-FR-LM-02, provenance tracking can be supported
as well. The realization of provenance tracking as verifiable
credentials “prevents unauthorized modifications and enables
verification of the contract’s legal history”, as required by
DCS-FR-TR-08.

|CAT-FR-LM-03 |DCS-FR-TR-21 |This CAT requirement directly translates to
the respective DCS requirement. The state of an asset being “approved”
can be represented as explained for DCS-FR-TR-05 above.

a|
CAT-FR-AC-01

CAT-FR-AC-02

|DCS-FR-TR-06 |These two CAT requirements directly translate to the
respective DCS requirement.

a|
CAT-FR-SF-01

CAT-FR-SF-02

|DCS-FR-TR-03 |These two CAT requirements directly translate to the
respective DCS requirement.

|CAT-FR-SF-03 |DCS-FR-TR-04 |This CAT requirement directly translates to
the respective DCS requirement.

|– |DCS-FR-TR-02 |Like explained above for DCS-FR-TR-26 and
DCS-FR-TR-24, “hierarchical contract structures” can be expressed by
linking multiple assets via properties defined in a custom OWL ontology.

a|
CAT-FR-CO-02

CAT-FR-CO-03

|DCS-FR-TR-10 |Metadata, which can be added to any contract via
CAT-FR-AM-03, are queryable from the graph database. Metadata about the
compliance status checked via CAT-FR-CO-03 are added to the graph
database via CAT-FR-CO-02 and can thus be queried as well.

|CAT-FR-CO-03 a|
DCS-FR-TR-07

DCS-FR-TR-20

|“Validat++[++ion of++]++ templates against regulatory framework” can be
implemented as a trust framework externally of the CAT, against which
the integrity and compliance of contract template assets can be
verified.

|CAT-FR-CO-04 |DCS-FR-TR-26 |Arbitrary dependency relationships may be
defined in custom OWL ontologies. The semantics of “logical consistency
and validity” of such dependencies between assets may be defined in OWL
ontologies and SHACL shapes. CAT-FR-CO-05 enables the user to validate a
set of multiple assets against one or more SHACL shapes.

|– |DCS-FR-TR-12 |Out of scope of the CAT

|– |DCS-FR-TR-14 |Out of scope, but partly supported as explained above
for DCS-FR-TR-05

|– |DCS-FR-TR-15 |Out of scope, but partly supported as explained above
for DCS-FR-TR-05

|– |DCS-FR-TR-22 |Out of scope of the CAT

|– |DCS-FR-TR-23 |Enforcing is out of scope

|– |DCS-FR-TR-25 |Out of scope of the CAT

|– |DCS-FR-TR-28 |Out of scope of the CAT
|===
